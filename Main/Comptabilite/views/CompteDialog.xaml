<Window x:Class="Superete.Main.Comptabilite.Views.CompteDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:res="clr-namespace:GestionComerce.Resources"
        Title="{x:Static res:Resources.CompteDialog_Title}"
        Height="550" 
        Width="500"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">

    <Window.Resources>
        <!-- Modern TextBox Style -->
        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#2D3748"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ScrollViewer x:Name="PART_ContentHost" 
                                        Padding="{TemplateBinding Padding}"
                                        VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#CBD5E0"/>
                            </Trigger>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#667EEA"/>
                                <Setter TargetName="border" Property="BorderThickness" Value="2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Modern ComboBox Style -->
        <Style x:Key="ModernComboBox" TargetType="ComboBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#2D3748"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Height" Value="40"/>
        </Style>

        <!-- Primary Button -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#667EEA"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="24,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="42"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#7C8FF5"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#5568D3"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Secondary Button -->
        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#4A5568"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="24,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="42"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#F7FAFC"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Label Style -->
        <Style x:Key="FormLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#4A5568"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>

        <!-- CheckBox Style -->
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="#2D3748"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </Window.Resources>

    <Border Background="White" CornerRadius="16" BorderBrush="#E2E8F0" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect Color="#000000" Opacity="0.15" BlurRadius="30" ShadowDepth="0"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0" 
                    Background="#667EEA" 
                    CornerRadius="16,16,0,0"
                    Padding="24,20"
                    MouseLeftButtonDown="Header_MouseLeftButtonDown">
                <Grid>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="📋" FontSize="24" Margin="0,0,12,0" VerticalAlignment="Center"/>
                        <StackPanel>
                            <TextBlock x:Name="TitleText" 
                                     Text="{x:Static res:Resources.CompteDialog_NewCompte}" 
                                     FontSize="20" 
                                     FontWeight="SemiBold"
                                     Foreground="White"/>
                            <TextBlock Text="{x:Static res:Resources.CompteDialog_Subtitle}" 
                                     FontSize="12" 
                                     Foreground="#E0E7FF"
                                     Margin="0,2,0,0"/>
                        </StackPanel>
                    </StackPanel>

                    <Button Content="✕" 
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Width="32"
                            Height="32"
                            FontSize="16"
                            Foreground="White"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand"
                            Click="BtnClose_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border" 
                                        Background="{TemplateBinding Background}"
                                        CornerRadius="6">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#5568D3"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>
            </Border>

            <!-- Form Content -->
            <ScrollViewer Grid.Row="1" 
                         VerticalScrollBarVisibility="Auto"
                         Padding="24,20">
                <StackPanel>
                    <!-- Code Compte -->
                    <StackPanel Margin="0,0,0,16">
                        <TextBlock Text="{x:Static res:Resources.CompteDialog_CodeCompte}" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="TxtCodeCompte" 
                                Style="{StaticResource ModernTextBox}"
                                MaxLength="10"/>
                    </StackPanel>

                    <!-- Libelle -->
                    <StackPanel Margin="0,0,0,16">
                        <TextBlock Text="{x:Static res:Resources.CompteDialog_Libelle}" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="TxtLibelle" 
                                Style="{StaticResource ModernTextBox}"/>
                    </StackPanel>

                    <!-- Classe -->
                    <StackPanel Margin="0,0,0,16">
                        <TextBlock Text="{x:Static res:Resources.CompteDialog_Classe}" Style="{StaticResource FormLabel}"/>
                        <ComboBox x:Name="CmbClasse" 
                                 Style="{StaticResource ModernComboBox}">
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_Classe1}" Tag="1"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_Classe2}" Tag="2"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_Classe3}" Tag="3"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_Classe4}" Tag="4"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_Classe5}" Tag="5"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_Classe6}" Tag="6"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_Classe7}" Tag="7"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_Classe8}" Tag="8"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Type de Compte -->
                    <StackPanel Margin="0,0,0,16">
                        <TextBlock Text="{x:Static res:Resources.CompteDialog_Type}" Style="{StaticResource FormLabel}"/>
                        <ComboBox x:Name="CmbType" 
                                 Style="{StaticResource ModernComboBox}">
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_TypeActif}"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_TypePassif}"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_TypeCharge}"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_TypeProduit}"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_TypeResultat}"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Sens Normal -->
                    <StackPanel Margin="0,0,0,16">
                        <TextBlock Text="{x:Static res:Resources.CompteDialog_SensNormal}" Style="{StaticResource FormLabel}"/>
                        <ComboBox x:Name="CmbSens" 
                                 Style="{StaticResource ModernComboBox}">
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_Debit}" Tag="Debit"/>
                            <ComboBoxItem Content="{x:Static res:Resources.CompteDialog_Credit}" Tag="Credit"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Actif -->
                    <Border Background="#F7FAFC" 
                           Padding="16"
                           CornerRadius="8"
                           Margin="0,8,0,0">
                        <CheckBox x:Name="ChkActif" 
                                 Content="{x:Static res:Resources.CompteDialog_CompteActif}" 
                                 IsChecked="True"
                                 FontWeight="Medium"/>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- Footer Buttons -->
            <Border Grid.Row="2" 
                   Background="#F7FAFC"
                   Padding="24,16"
                   CornerRadius="0,0,16,16"
                   BorderBrush="#E2E8F0"
                   BorderThickness="0,1,0,0">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="{x:Static res:Resources.Cancel}" 
                           Style="{StaticResource SecondaryButton}"
                           Width="120"
                           Click="BtnCancel_Click"
                           Margin="0,0,12,0"/>
                    <Button Content="{x:Static res:Resources.CompteDialog_Save}" 
                           Style="{StaticResource PrimaryButton}"
                           Width="140"
                           Click="BtnSave_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
