<Window x:Class="GestionComerce.Main.Inventory.WAddArticle"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ajouter un Article"
        Width="1400" Height="900"
        ResizeMode="NoResize"
        Background="Transparent"
        WindowStyle="None"
        AllowsTransparency="True" WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!-- Elite Color Palette -->
        <SolidColorBrush x:Key="PrimaryDark" Color="#1E293B"/>
        <SolidColorBrush x:Key="PrimaryBlue" Color="#3B82F6"/>
        <SolidColorBrush x:Key="AccentCyan" Color="#06B6D4"/>
        <SolidColorBrush x:Key="AccentPurple" Color="#8B5CF6"/>
        <SolidColorBrush x:Key="SuccessGreen" Color="#10B981"/>
        <SolidColorBrush x:Key="WarningOrange" Color="#F59E0B"/>
        <SolidColorBrush x:Key="DangerRed" Color="#EF4444"/>
        <SolidColorBrush x:Key="BackgroundLight" Color="#F8FAFC"/>
        <SolidColorBrush x:Key="SurfaceWhite" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="BorderLight" Color="#E2E8F0"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#0F172A"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#64748B"/>
        <SolidColorBrush x:Key="TextTertiary" Color="#94A3B8"/>

        <!-- Premium Shadows -->
        <DropShadowEffect x:Key="ShadowXl" BlurRadius="48" ShadowDepth="0" Color="#000000" Opacity="0.12"/>
        <DropShadowEffect x:Key="ShadowLg" BlurRadius="32" ShadowDepth="0" Color="#000000" Opacity="0.08"/>

        <!-- Header Title Style -->
        <Style x:Key="HeaderTitleStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="28"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        </Style>

        <!-- Section Title Style -->
        <Style x:Key="SectionTitleStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryBlue}"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
        </Style>

        <!-- Label Style -->
        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>

        <!-- Modern TextBox Style -->
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox">
            <Setter Property="Height" Value="44"/>
            <Setter Property="Padding" Value="14,0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <Grid>
                                <ScrollViewer x:Name="PART_ContentHost" 
                                              Focusable="False"
                                              HorizontalScrollBarVisibility="Hidden"
                                              VerticalScrollBarVisibility="Hidden"
                                              Padding="{TemplateBinding Padding}"
                                              VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#3B82F6"/>
                                <Setter TargetName="border" Property="BorderThickness" Value="2"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#CBD5E1"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Required TextBox Style -->
        <Style x:Key="RequiredTextBoxStyle" TargetType="TextBox" BasedOn="{StaticResource ModernTextBoxStyle}">
            <Style.Triggers>
                <Trigger Property="Text" Value="">
                    <Setter Property="BorderBrush" Value="#EF4444"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Modern DatePicker Style -->
        <Style x:Key="ModernDatePickerStyle" TargetType="DatePicker">
            <Setter Property="Height" Value="44"/>
            <Setter Property="Padding" Value="14,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Background" Value="{StaticResource SurfaceWhite}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderLight}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>

        <!-- Modern ComboBox Style -->
        <Style x:Key="ModernComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Height" Value="44"/>
            <Setter Property="Padding" Value="14,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Background" Value="{StaticResource SurfaceWhite}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderLight}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>

        <!-- Modern CheckBox Style -->
        <Style x:Key="ModernCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Icon Button Style -->
        <Style x:Key="IconButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource SuccessGreen}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="44"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#059669"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#047857"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Close Button Style -->
        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FEE2E2"/>
                                <Setter Property="Foreground" Value="{StaticResource DangerRed}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Primary Button Style -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryBlue}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="24,14"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="52"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="10"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2563EB"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#1E40AF"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Success Button Style -->
        <Style x:Key="SuccessButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}">
            <Setter Property="Background" Value="{StaticResource SuccessGreen}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#059669"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#047857"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Danger Button Style -->
        <Style x:Key="DangerButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}">
            <Setter Property="Background" Value="{StaticResource DangerRed}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#DC2626"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#B91C1C"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Purple Button Style -->
        <Style x:Key="PurpleButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButtonStyle}">
            <Setter Property="Background" Value="{StaticResource AccentPurple}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#7C3AED"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#6D28D9"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Section Card Style -->
        <Style x:Key="SectionCardStyle" TargetType="Border">
            <Setter Property="Background" Value="#FAFBFC"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderLight}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Margin" Value="0,0,0,24"/>
        </Style>
    </Window.Resources>

    <Border Padding="0" Margin="20"
            Background="{StaticResource SurfaceWhite}" 
            CornerRadius="16"
            Effect="{StaticResource ShadowXl}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header Section -->
            <Border Grid.Row="0" 
                    Background="{StaticResource BackgroundLight}"
                    CornerRadius="16,16,0,0"
                    BorderBrush="{StaticResource BorderLight}"
                    BorderThickness="0,0,0,1">
                <Grid Margin="32,24">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Rectangle Width="4" Height="32" 
                                   Fill="{StaticResource PrimaryBlue}" 
                                   RadiusX="2" RadiusY="2"
                                   Margin="0,0,16,0"/>
                        <TextBlock x:Name="HeaderText"
                                   Text="Ajouter un nouvel article"
                                   Style="{StaticResource HeaderTitleStyle}"/>
                    </StackPanel>

                    <Button Name="CloseButton"
                            Style="{StaticResource CloseButtonStyle}"
                            Content="✕"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Click="CloseButton_Click"/>
                </Grid>
            </Border>

            <!-- Content Section -->
            <ScrollViewer Grid.Row="1" 
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          Padding="32,24">
                <StackPanel>
                    <!-- Essential Information Section -->
                    <Border Style="{StaticResource SectionCardStyle}">
                        <StackPanel>
                            <TextBlock Text="📋 Informations Essentielles" 
                                       Style="{StaticResource SectionTitleStyle}"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Column 1 -->
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="Fournisseur *" Style="{StaticResource LabelStyle}"/>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="8"/>
                                            <ColumnDefinition Width="44"/>
                                        </Grid.ColumnDefinitions>
                                        <ComboBox Name="FournisseurList"
                                                  Grid.Column="0"
                                                  Style="{StaticResource ModernComboBoxStyle}"
                                                  Margin="0"/>
                                        <Button Grid.Column="2" 
                                                Name="AjouterFournisseur"
                                                Content="+"
                                                Style="{StaticResource IconButtonStyle}"
                                                Click="AddSupplierButton_Click"/>
                                    </Grid>

                                    <TextBlock Text="Code Article *" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="Code" 
                                             MaxLength="18"
                                             Style="{StaticResource RequiredTextBoxStyle}"
                                             PreviewTextInput="IntegerTextBox_PreviewTextInput"
                                             DataObject.Pasting="IntegerTextBox_Pasting"/>

                                    <TextBlock Text="SKU" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="SKU" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             MaxLength="50"/>
                                </StackPanel>

                                <!-- Column 2 -->
                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Nom de l'article *" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="ArticleName" 
                                             Style="{StaticResource RequiredTextBoxStyle}"
                                             MaxLength="100"/>

                                    <TextBlock Text="Famille *" Style="{StaticResource LabelStyle}"/>
                                    <Grid Margin="0,0,0,16">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="8"/>
                                            <ColumnDefinition Width="44"/>
                                        </Grid.ColumnDefinitions>
                                        <ComboBox Name="FamilliesList"
                                                  Grid.Column="0"
                                                  Style="{StaticResource ModernComboBoxStyle}"
                                                  Margin="0"/>
                                        <Button Grid.Column="2" 
                                                Name="AjouterFamille"
                                                Content="+"
                                                Style="{StaticResource IconButtonStyle}"
                                                Click="AddFamillyButton_Click"/>
                                    </Grid>

                                    <TextBlock Text="Marque" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="Marque" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             MaxLength="100"/>
                                </StackPanel>

                                <!-- Column 3 -->
                                <StackPanel Grid.Column="4">
                                    <TextBlock Text="Fabricant" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="Manufacturer" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             MaxLength="200"/>

                                    <TextBlock Text="Pays d'origine" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="CountryOfOrigin" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             MaxLength="100"/>

                                    <TextBlock Text="Unité de mesure" Style="{StaticResource LabelStyle}"/>
                                    <ComboBox x:Name="UnitOfMeasure"
                                              Style="{StaticResource ModernComboBoxStyle}">
                                        <ComboBoxItem Content="Pièce" IsSelected="True"/>
                                        <ComboBoxItem Content="Kg"/>
                                        <ComboBoxItem Content="Litre"/>
                                        <ComboBoxItem Content="Mètre"/>
                                        <ComboBoxItem Content="Boîte"/>
                                        <ComboBoxItem Content="Carton"/>
                                    </ComboBox>
                                </StackPanel>

                                <!-- Column 4 -->
                                <StackPanel Grid.Column="6">
                                    <TextBlock Text="Image de l'article" Style="{StaticResource LabelStyle}"/>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="8"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <Border Grid.Row="0"
                                                x:Name="ImagePreviewBorder"
                                                Height="120"
                                                BorderBrush="{StaticResource BorderLight}"
                                                BorderThickness="1"
                                                CornerRadius="10"
                                                Background="#F8FAFC">
                                            <Image x:Name="ArticleImagePreview" 
                                                   Stretch="Uniform"
                                                   Margin="4"/>
                                        </Border>

                                        <Button Grid.Row="2"
                                                Name="SelectImageButton"
                                                Content="📁 Sélectionner une image"
                                                Style="{StaticResource PrimaryButtonStyle}"
                                                Height="40"
                                                Click="SelectImageButton_Click"/>
                                    </Grid>
                                </StackPanel>
                            </Grid>

                            <!-- Description (Full Width) -->
                            <TextBlock Text="Description" Style="{StaticResource LabelStyle}" Margin="0,8,0,8"/>
                            <TextBox x:Name="Description"
                                     TextWrapping="Wrap"
                                     AcceptsReturn="True"
                                     Height="80"
                                     Padding="14,12"
                                     Style="{StaticResource ModernTextBoxStyle}"
                                     VerticalContentAlignment="Top"
                                     MaxLength="500"/>
                        </StackPanel>
                    </Border>

                    <!-- Pricing & Stock Section -->
                    <Border Style="{StaticResource SectionCardStyle}">
                        <StackPanel>
                            <TextBlock Text="💰 Prix et Stock" 
                                       Style="{StaticResource SectionTitleStyle}"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Column 1 -->
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="Prix d'achat (DH) *" Style="{StaticResource LabelStyle}"/>
                                    <TextBox Name="PrixA" 
                                             Style="{StaticResource RequiredTextBoxStyle}" 
                                             Text="0.00" 
                                             PreviewTextInput="DecimalTextBox_PreviewTextInput" 
                                             MaxLength="18" 
                                             DataObject.Pasting="DecimalTextBox_Pasting"/>

                                    <TextBlock Text="Prix de gros (DH)" Style="{StaticResource LabelStyle}"/>
                                    <TextBox Name="PrixGros" 
                                             Style="{StaticResource ModernTextBoxStyle}" 
                                             Text="0.00" 
                                             PreviewTextInput="DecimalTextBox_PreviewTextInput" 
                                             MaxLength="18" 
                                             DataObject.Pasting="DecimalTextBox_Pasting"/>
                                </StackPanel>

                                <!-- Column 2 -->
                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Prix de vente (DH) *" Style="{StaticResource LabelStyle}"/>
                                    <TextBox Name="PrixV" 
                                             Style="{StaticResource RequiredTextBoxStyle}" 
                                             PreviewTextInput="DecimalTextBox_PreviewTextInput" 
                                             MaxLength="18" 
                                             Text="0.00" 
                                             DataObject.Pasting="DecimalTextBox_Pasting"/>

                                    <TextBlock Text="Qté min pour prix de gros" Style="{StaticResource LabelStyle}"/>
                                    <TextBox Name="MinQuantityForGros" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="0"
                                             PreviewTextInput="IntegerTextBox_PreviewTextInput"
                                             MaxLength="10"
                                             DataObject.Pasting="IntegerTextBox_Pasting"/>
                                </StackPanel>

                                <!-- Column 3 -->
                                <StackPanel Grid.Column="4">
                                    <TextBlock Text="Prix MP (DH) *" Style="{StaticResource LabelStyle}"/>
                                    <TextBox Name="PrixMP" 
                                             Style="{StaticResource RequiredTextBoxStyle}" 
                                             Text="0.00" 
                                             PreviewTextInput="DecimalTextBox_PreviewTextInput" 
                                             MaxLength="18" 
                                             DataObject.Pasting="DecimalTextBox_Pasting"/>

                                    <TextBlock Text="TVA (%)" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="TVA" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="0.00"
                                             PreviewTextInput="DecimalTextBox_PreviewTextInput"
                                             MaxLength="5"
                                             DataObject.Pasting="DecimalTextBox_Pasting"/>
                                </StackPanel>

                                <!-- Column 4 -->
                                <StackPanel Grid.Column="6">
                                    <TextBlock Text="Quantité initiale *" Style="{StaticResource LabelStyle}"/>
                                    <TextBox Name="Quantite" 
                                             Style="{StaticResource RequiredTextBoxStyle}" 
                                             Text="0" 
                                             PreviewTextInput="IntegerTextBox_PreviewTextInput" 
                                             MaxLength="10" 
                                             DataObject.Pasting="IntegerTextBox_Pasting"/>

                                    <CheckBox x:Name="IsUnlimitedStock"
                                              Content="Stock illimité"
                                              Style="{StaticResource ModernCheckBoxStyle}"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Stock Management Section -->
                    <Border Style="{StaticResource SectionCardStyle}">
                        <StackPanel>
                            <TextBlock Text="📊 Gestion de Stock" 
                                       Style="{StaticResource SectionTitleStyle}"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="Stock minimum" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="MinimumStock" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="0"
                                             PreviewTextInput="IntegerTextBox_PreviewTextInput"
                                             MaxLength="10"
                                             DataObject.Pasting="IntegerTextBox_Pasting"/>
                                </StackPanel>

                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Stock maximum" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="MaximumStock" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="0"
                                             PreviewTextInput="IntegerTextBox_PreviewTextInput"
                                             MaxLength="10"
                                             DataObject.Pasting="IntegerTextBox_Pasting"/>
                                </StackPanel>

                                <StackPanel Grid.Column="4">
                                    <TextBlock Text="Emplacement de stockage" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="StorageLocation" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             MaxLength="100"/>
                                </StackPanel>

                                <StackPanel Grid.Column="6">
                                    <CheckBox x:Name="IsPerishable"
                                              Content="Produit périssable"
                                              Style="{StaticResource ModernCheckBoxStyle}"
                                              Margin="0,28,0,16"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Packaging Information Section -->
                    <Border Style="{StaticResource SectionCardStyle}">
                        <StackPanel>
                            <TextBlock Text="📦 Informations d'Emballage" 
                                       Style="{StaticResource SectionTitleStyle}"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="Pièces par emballage" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="PiecesPerPackage" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="1"
                                             PreviewTextInput="IntegerTextBox_PreviewTextInput"
                                             MaxLength="10"
                                             DataObject.Pasting="IntegerTextBox_Pasting"/>
                                </StackPanel>

                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Type d'emballage" Style="{StaticResource LabelStyle}"/>
                                    <ComboBox x:Name="PackageType"
                                              Style="{StaticResource ModernComboBoxStyle}">
                                        <ComboBoxItem Content="Boîte" IsSelected="True"/>
                                        <ComboBoxItem Content="Carton"/>
                                        <ComboBoxItem Content="Sac"/>
                                        <ComboBoxItem Content="Palette"/>
                                        <ComboBoxItem Content="Caisse"/>
                                        <ComboBoxItem Content="Bidon"/>
                                        <ComboBoxItem Content="Autre"/>
                                    </ComboBox>
                                </StackPanel>

                                <StackPanel Grid.Column="4">
                                    <TextBlock Text="Poids de l'emballage (Kg)" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="PackageWeight" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="0.00"
                                             PreviewTextInput="DecimalTextBox_PreviewTextInput"
                                             MaxLength="10"
                                             DataObject.Pasting="DecimalTextBox_Pasting"/>
                                </StackPanel>

                                <StackPanel Grid.Column="6">
                                    <TextBlock Text="Dimensions (ex: 30x20x15 cm)" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="PackageDimensions" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             MaxLength="50"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Dates & Lot Information Section -->
                    <Border Style="{StaticResource SectionCardStyle}">
                        <StackPanel>
                            <TextBlock Text="📅 Dates et Lots" 
                                       Style="{StaticResource SectionTitleStyle}"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Row 1 -->
                                <StackPanel Grid.Column="0" Grid.Row="0">
                                    <TextBlock Text="Date" Style="{StaticResource LabelStyle}"/>
                                    <DatePicker x:Name="DateArticle" 
                                                Style="{StaticResource ModernDatePickerStyle}"/>
                                </StackPanel>

                                <StackPanel Grid.Column="2" Grid.Row="0">
                                    <TextBlock Text="Date de livraison" Style="{StaticResource LabelStyle}"/>
                                    <DatePicker x:Name="DateLivraison" 
                                                Style="{StaticResource ModernDatePickerStyle}"/>
                                </StackPanel>

                                <StackPanel Grid.Column="4" Grid.Row="0">
                                    <TextBlock Text="Date d'expiration" Style="{StaticResource LabelStyle}"/>
                                    <DatePicker x:Name="DateExpiration" 
                                                Style="{StaticResource ModernDatePickerStyle}"/>
                                </StackPanel>

                                <!-- Row 2 -->
                                <StackPanel Grid.Column="0" Grid.Row="1">
                                    <TextBlock Text="Numéro de lot" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="NumeroLot" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             MaxLength="50"/>
                                </StackPanel>

                                <StackPanel Grid.Column="2" Grid.Row="1">
                                    <TextBlock Text="Bon de livraison" Style="{StaticResource LabelStyle}"/>
                                    <TextBox x:Name="BonLivraison" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             MaxLength="50"/>
                                </StackPanel>

                                <StackPanel Grid.Column="4" Grid.Row="1">
                                    <TextBlock Text="Date dernier réappro." Style="{StaticResource LabelStyle}"/>
                                    <DatePicker x:Name="LastRestockDate" 
                                                Style="{StaticResource ModernDatePickerStyle}"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Notes Section -->
                    <Border Style="{StaticResource SectionCardStyle}">
                        <StackPanel>
                            <TextBlock Text="📝 Notes" 
                                       Style="{StaticResource SectionTitleStyle}"/>

                            <TextBox x:Name="Notes"
                                     TextWrapping="Wrap"
                                     AcceptsReturn="True"
                                     Height="100"
                                     Padding="14,12"
                                     Style="{StaticResource ModernTextBoxStyle}"
                                     VerticalContentAlignment="Top"
                                     MaxLength="1000"
                                     Margin="0"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- Footer Section -->
            <Border Grid.Row="2" 
                    Background="{StaticResource BackgroundLight}"
                    CornerRadius="0,0,16,16"
                    BorderBrush="{StaticResource BorderLight}"
                    BorderThickness="0,1,0,0"
                    Padding="32,24">

                <Grid>
                    <!-- Payment Buttons Container -->
                    <StackPanel x:Name="ButtonsContainer">
                        <Grid Margin="0,0,0,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="180"/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="Méthode de Paiement:" 
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       Style="{StaticResource LabelStyle}"
                                       Margin="0"/>

                            <ComboBox x:Name="PaymentMethodComboBox"
                                      Grid.Column="2"
                                      Style="{StaticResource ModernComboBoxStyle}"
                                      Margin="0"
                                      SelectedIndex="0"/>
                        </Grid>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="12"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="12"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Button x:Name="CashButton" 
                                    Grid.Column="0" 
                                    Style="{StaticResource PrimaryButtonStyle}" 
                                    Click="CashButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="💵" FontSize="18" Margin="0,0,8,0"/>
                                    <TextBlock Text="CASH" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="HalfButton" 
                                    Grid.Column="2" 
                                    Style="{StaticResource DangerButtonStyle}" 
                                    Click="HalfButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="⚖️" FontSize="18" Margin="0,0,8,0"/>
                                    <TextBlock Text="50/50" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>

                            <Button x:Name="CreditButton" 
                                    Grid.Column="4" 
                                    Style="{StaticResource SuccessButtonStyle}" 
                                    Click="CreditButton_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="💳" FontSize="18" Margin="0,0,8,0"/>
                                    <TextBlock Text="CREDIT" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                    </StackPanel>

                    <Button x:Name="EnregistrerButton" 
                            Content="✅ Enregistrer" 
                            Style="{StaticResource PrimaryButtonStyle}"
                            Click="EnregistrerButton_Click" 
                            Visibility="Collapsed"/>

                    <Button x:Name="AjouterButton" 
                            Content="➕ Ajouter" 
                            Style="{StaticResource SuccessButtonStyle}"
                            Click="AjouterButton_Click" 
                            Visibility="Collapsed"/>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>