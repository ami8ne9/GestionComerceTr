<Window x:Class="GestionComerce.Main.ProjectManagment.WPlus"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:p="clr-namespace:GestionComerce.Resources"
        Title="{x:Static p:Resources.OperationDetails}" Height="738" Width="900" 
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        AllowsTransparency="True"
        ShowInTaskbar="True"
        WindowStyle="None" 
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- Styles omitted for brevity - keeping original styles -->
    </Window.Resources>

    <Border Background="White" 
            CornerRadius="16" 
            BorderBrush="#E5E7EB" 
            BorderThickness="1"
            Margin="10">
        <Grid Margin="40">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Close X Button -->
            <Button HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Margin="0,-10,-10,0"
                    Panel.ZIndex="999"
                    Width="36" Height="36"
                    Background="Transparent"
                    BorderThickness="0"
                    Cursor="Hand"
                    Click="CloseButton_Click">
                <TextBlock Text="×" FontSize="20" FontWeight="Bold" Foreground="#6B7280"/>
            </Button>

            <!-- Header Section -->
            <Border Grid.Row="0" Background="White" CornerRadius="12" Padding="24" Margin="0,0,0,16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Operation Type Icon -->
                    <Border Grid.Column="0" x:Name="IconColor" Background="#10B981" Width="48" Height="48" CornerRadius="24" Margin="0,0,16,0">
                        <TextBlock x:Name="Start" Text="V" FontSize="20" FontWeight="Bold" Foreground="White"
                                  HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>

                    <!-- Title and ID -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock x:Name="OperationType1" Text="Vente #V-2024-001" FontSize="24" FontWeight="SemiBold" Foreground="#1F2937"/>
                        <TextBlock x:Name="OperationSubtitle" Text="{x:Static p:Resources.TransactionCompletedSuccessfully}" 
                                  FontSize="14" Foreground="#6B7280"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Main Content -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <!-- Operation Information -->
                    <Border Background="White" CornerRadius="12" Padding="24" Margin="0,0,0,16">
                        <StackPanel>
                            <TextBlock Text="{x:Static p:Resources.OperationInformation}" FontSize="16" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,12"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="24"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="24"/>
                                    <ColumnDefinition Width="*" x:Name="RightSideContainer"/>
                                    <ColumnDefinition Width="24"/>
                                    <ColumnDefinition Width="*" x:Name="RRightSideContainer"/>
                                </Grid.ColumnDefinitions>

                                <!-- Column 1 -->
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{x:Static p:Resources.OperationID}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="OperationId" Text="V-2024-001" FontSize="14" Foreground="#1F2937" Margin="0,0,0,16"/>

                                    <TextBlock Text="{x:Static p:Resources.OperationType}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="OperationType2" Text="{x:Static p:Resources.Sale}" FontSize="14" Foreground="#1F2937" Margin="0,0,0,16"/>

                                    <TextBlock Text="{x:Static p:Resources.DateTime}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="OperationDate" Text="24/09/2024 - 14:30" FontSize="14" Foreground="#1F2937" Margin="0,0,0,16"/>
                                </StackPanel>

                                <!-- Column 2 -->
                                <StackPanel Grid.Column="2">
                                    <TextBlock x:Name="TotalPriceLabel" Text="{x:Static p:Resources.TotalPrice}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="TotalPrice" Text="€157.45" FontSize="16" FontWeight="Bold" Foreground="#059669" Margin="0,0,0,16"/>

                                    <TextBlock x:Name="RemiseLabel" Text="{x:Static p:Resources.AppliedDiscount}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="Remise" Text="0.00 DH" FontSize="14" Foreground="#DC2626" Margin="0,0,0,16"/>

                                    <TextBlock Text="{x:Static p:Resources.User}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="UserName" Text="Sophie Laurent" FontSize="14" Foreground="#1F2937" Margin="0,0,0,16"/>
                                </StackPanel>

                                <!-- Column 3 -->
                                <StackPanel Grid.Column="4">
                                    <TextBlock x:Name="FC" Text="{x:Static p:Resources.Client}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="FCName" Text="" FontSize="14" Foreground="#1F2937" Margin="0,0,0,16"/>

                                    <TextBlock x:Name="ArticlesCountLabel" Text="{x:Static p:Resources.NumberOfArticles}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="ArticlesCount" Text="3 articles" FontSize="14" Foreground="#1F2937" Margin="0,0,0,16"/>

                                    <TextBlock x:Name="TransactionLabel" Text="{x:Static p:Resources.TransactionType}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="Transaction" Text="{x:Static p:Resources.Cash}" FontSize="14" Foreground="#1F2937" Margin="0,0,0,16"/>
                                </StackPanel>

                                <!-- Column 4 -->
                                <StackPanel Grid.Column="6">
                                    <TextBlock x:Name="CreditValueLabel" Text="{x:Static p:Resources.CreditValue}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="CreditValue" Text="0.00 DH" FontSize="14" Foreground="#1F2937" Margin="0,0,0,16"/>

                                    <TextBlock x:Name="PaymentTypeLabel" Text="{x:Static p:Resources.PaymentType}" FontSize="13" FontWeight="Medium" Foreground="#6B7280" Margin="0,0,0,4"/>
                                    <TextBlock x:Name="PaymentType" Text="" FontSize="14" Foreground="#1F2937" Margin="0,0,0,16"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Articles List -->
                    <Border x:Name="ArticleOperation" Background="White" CornerRadius="12" Padding="24" Margin="0,0,0,16">
                        <StackPanel>
                            <Grid Margin="0,0,0,16">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="{x:Static p:Resources.ArticlesInThisOperation}" FontSize="16" FontWeight="SemiBold" Foreground="#374151"/>
                                <TextBlock Grid.Column="1" x:Name="ArticlesTotalValue" Text="Total: €157.45" 
                                          FontSize="14" FontWeight="Bold" Foreground="#059669" VerticalAlignment="Center"/>
                            </Grid>

                            <!-- Articles Table Header -->
                            <Grid Background="#F9FAFB" Margin="0,0,0,1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="{x:Static p:Resources.Article}" FontSize="12" FontWeight="SemiBold" Foreground="#374151" Padding="12,8" Background="#F9FAFB"/>
                                <TextBlock Grid.Column="1" Text="{x:Static p:Resources.Quantity}" FontSize="12" FontWeight="SemiBold" Foreground="#374151" Padding="12,8" Background="#F9FAFB" TextAlignment="Center"/>
                                <TextBlock Grid.Column="2" Text="{x:Static p:Resources.UnitPrice}" FontSize="12" FontWeight="SemiBold" Foreground="#374151" Padding="12,8" Background="#F9FAFB" TextAlignment="Right"/>
                                <TextBlock Grid.Column="3" Text="{x:Static p:Resources.Total}" FontSize="12" FontWeight="SemiBold" Foreground="#374151" Padding="12,8" Background="#F9FAFB" TextAlignment="Right"/>
                            </Grid>

                            <!-- Articles List -->
                            <StackPanel x:Name="ArticlesContainer" />

                            <!-- Summary Row -->
                            <Border Background="#F9FAFB" Margin="0,16,0,0" Padding="12" CornerRadius="8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock x:Name="Total" FontSize="13" Foreground="#6B7280" Text="Subtotal: €171.45"/>
                                        <TextBlock x:Name="Remise2" FontSize="13" Foreground="#DC2626" Margin="0,4,0,0" Text="Discount: -€12.50"/>
                                    </StackPanel>

                                    <TextBlock Grid.Column="1" x:Name="TotalFinal" FontSize="18" FontWeight="Bold" Foreground="#059669" VerticalAlignment="Center" Text="Final Total: €157.45"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- Footer -->
            <Border Grid.Row="2" Padding="0,16,0,0">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="Imprimer" Content="{x:Static p:Resources.PrintInvoice}" Visibility="Collapsed"
                           Background="#3B82F6" Foreground="White" FontSize="14" Padding="20,10" BorderThickness="0" Cursor="Hand"
                           Margin="0,0,12,0" Click="Imprimer_Click"/>
                    <Button x:Name="ReverseAritcles" Content="{x:Static p:Resources.SelectArticlesToReverse}"
                           Background="#3B82F6" Foreground="White" FontSize="14" Padding="20,10" BorderThickness="0" Cursor="Hand"
                           Margin="0,0,12,0" Click="ReverseAritcles_Click"/>
                    <Button Content="{x:Static p:Resources.Close}" 
                           Background="#6B7280" Foreground="White" FontSize="14" Padding="20,10" BorderThickness="0" Cursor="Hand"
                           Click="CloseButton_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>